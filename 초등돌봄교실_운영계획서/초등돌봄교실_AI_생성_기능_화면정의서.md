# 초등돌봄교실 AI 생성 기능 화면정의서

## 🎨 전체 화면 구조

### 레이아웃 원칙
- AI 생성 버튼: 텍스트 영역 **우측 상단** 고정
- 보라색 그라데이션 버튼 (방과후학교와 동일한 디자인)
- 로딩 시 스피너 애니메이션
- 생성 완료 시 초록색 하이라이트

---

## 📱 Step별 화면 상세

### Step 2: 운영 목표 및 방침

#### 화면 구성
```
┌─────────────────────────────────────────────┐
│  초등돌봄교실 운영계획서 작성                │
│  ─ ● ─ ─ ─ ─ ─ ─                           │
│  1  2  3  4  5  6  7  8                     │
├─────────────────────────────────────────────┤
│                                             │
│  [2단계] 운영 목표 및 방침                   │
│                                             │
│  운영 목적 * (중복 선택)                     │
│  [✓] 방과후 돌봄 공백 해소                   │
│  [✓] 맞벌이 가정 지원                        │
│  [ ] 저소득층 아동 보호                      │
│  [ ] 안전한 돌봄 환경 제공                   │
│                                             │
│  운영 방침 * (중복 선택)                     │
│  [✓] 무상 돌봄 운영                          │
│  [✓] 수요자 중심 운영                        │
│  [ ] 안전 최우선 운영                        │
│                                             │
│  추가 목표/방침 (선택)        [🤖 AI 생성]   │
│  ┌───────────────────────────────────┐   │
│  │ 부산사랑초등학교는 맞벌이 가정의 자녀들에게│   │
│  │ 안전하고 따뜻한 방과후 돌봄 환경을 제공하여│   │
│  │ 학부모의 양육 부담을 경감하고, 학생들의    │   │
│  │ 건강한 성장을 지원합니다.                  │   │
│  │                                           │   │
│  └───────────────────────────────────┘   │
│  0 / 500자                                  │
│                                             │
│         [ ← 이전 ]      [ 다음 → ]          │
└─────────────────────────────────────────────┘
```

#### UI 요소
1. **체크박스 그룹**: 운영 목적, 방침
2. **AI 생성 버튼**: 우측 상단
3. **Textarea**: 500자 제한, 실시간 카운터
4. **버튼 상태**:
   - 기본: 보라색 그라데이션
   - 생성 중: 회색 + 스피너
   - 완료: 텍스트 영역 초록 하이라이트

---

### Step 4: 프로그램 운영 계획

#### 화면 구성
```
┌─────────────────────────────────────────────┐
│  초등돌봄교실 운영계획서 작성                │
│  ─ ─ ─ ● ─ ─ ─ ─                           │
│  1  2  3  4  5  6  7  8                     │
├─────────────────────────────────────────────┤
│                                             │
│  [4단계] 프로그램 운영 계획                  │
│                                             │
│  총 프로그램: 2개                            │
│                                             │
│  ┌───────────────────────────────────┐   │
│  │ 📚 프로그램 1                             │   │
│  │                                           │   │
│  │ 프로그램명: [책놀이]                      │   │
│  │                                           │   │
│  │ 운영 요일: [✓] 월 [✓] 수 [✓] 금          │   │
│  │                                           │   │
│  │ 운영 시간: [15:00] ~ [16:00]              │   │
│  │                                           │   │
│  │ 대상 학년: [✓] 1학년 [✓] 2학년           │   │
│  │                                           │   │
│  │ 정원: [15]명                              │   │
│  │                                           │   │
│  │ 강사 유형:                                │   │
│  │ (●) 돌봄전담사  ( ) 외부강사  ( ) 자원봉사│   │
│  │                                           │   │
│  │ 프로그램 내용        [🤖 AI 생성]         │   │
│  │ ┌─────────────────────────────┐       │   │
│  │ │ 다양한 그림책을 활용하여 학생들의 │       │   │
│  │ │ 상상력과 언어 능력을 키우는 프로그│       │   │
│  │ │ 램입니다. 책 읽기, 토론, 그림 그리│       │   │
│  │ │ 기 등의 활동을 통해 독서 습관을 형│       │   │
│  │ │ 성하고...                         │       │   │
│  │ └─────────────────────────────┘       │   │
│  │                                           │   │
│  │            [🗑️ 프로그램 삭제]             │   │
│  └───────────────────────────────────┘   │
│                                             │
│            [➕ 프로그램 추가]                │
│                                             │
│         [ ← 이전 ]      [ 다음 → ]          │
└─────────────────────────────────────────────┘
```

#### 인터랙션
1. **프로그램 카드**: 동적 추가/삭제
2. **AI 생성 조건**:
   - 프로그램명 필수
   - 대상, 시간 입력 권장
3. **생성 프로세스**:
   ```
   사용자 [AI 생성] 클릭
       ↓
   폼 데이터 수집 (프로그램명, 요일, 시간, 대상, 강사)
       ↓
   버튼 비활성화 + 스피너 표시
       ↓
   API 호출 (documentType: 'care')
       ↓
   생성된 텍스트 자동 입력
       ↓
   초록색 배경 1초간 표시
       ↓
   버튼 재활성화
   ```

---

### Step 5: 학생 모집 및 관리

#### 화면 구성 (1/2)
```
┌─────────────────────────────────────────────┐
│  [5단계] 학생 모집 및 관리                   │
│                                             │
│  ━━━ 출결 관리 ━━━                        │
│                                             │
│  출결 확인 방법 * (중복 선택)               │
│  [✓] 전자 출결 시스템                       │
│  [✓] 돌봄전담사 수기 기록                   │
│  [ ] 학부모 문자 확인                       │
│                                             │
│  결석 처리 절차          [🤖 AI 생성]       │
│  ┌───────────────────────────────────┐   │
│  │ 학부모가 사전에 연락하면 출결 기록부에    │   │
│  │ 기재하고, 무단 결석 시에는 즉시 학부모와  │   │
│  │ 담임교사에게 통보합니다. 지속적인 무단    │   │
│  │ 결석 시에는 상담을 통해 원인을 파악하고   │   │
│  │ 적절한 조치를 취합니다.                   │   │
│  └───────────────────────────────────┘   │
│                                             │
│  ━━━ 하원 관리 ━━━                        │
│                                             │
│  하원 방법 *                                │
│  (●) 학부모 직접 인계                       │
│  ( ) 동의서 기반 자율 하원                  │
│  ( ) 안전귀가 지도                          │
│                                             │
│  긴급 연락망 구축 방법    [🤖 AI 생성]     │
│  ┌───────────────────────────────────┐   │
│  │ 입실 시 학부모 연락처와 비상연락처를      │   │
│  │ 등록받아 비상연락망을 구축합니다. 긴급    │   │
│  │ 상황 발생 시 돌봄전담사가 즉시 학부모와  │   │
│  │ 담임교사에게 연락하며...                  │   │
│  └───────────────────────────────────┘   │
│                                             │
│         [ ← 이전 ]      [ 다음 → ]          │
└─────────────────────────────────────────────┘
```

#### UI 특징
- 섹션 구분: ━━━ 타이틀 ━━━
- 2개 textarea에 각각 AI 버튼
- 다른 필드 입력값 참고하여 생성

---

### Step 6: 안전 및 급식 관리

#### 화면 구성
```
┌─────────────────────────────────────────────┐
│  [6단계] 안전 및 급식 관리                   │
│                                             │
│  ━━━ 안전 관리 ━━━                        │
│                                             │
│  안전교육 실시 여부 *                        │
│  (●) 실시    ( ) 미실시                     │
│                                             │
│  ┌─ 안전교육 세부사항 ──────────────┐   │
│  │                                           │   │
│  │ 실시 시기          [🤖 AI 생성]          │   │
│  │ ┌─────────────────────────────┐       │   │
│  │ │ 학기 초 오리엔테이션 시 기본 안전 │       │   │
│  │ │ 교육을 실시하고, 매월 1회 주제별  │       │   │
│  │ │ 안전교육(화재, 지진, 교통, 성폭력 │       │   │
│  │ │ 예방 등)을 순환 진행합니다.       │       │   │
│  │ └─────────────────────────────┘       │   │
│  │                                           │   │
│  │ 교육 내용          [🤖 AI 생성]          │   │
│  │ ┌─────────────────────────────┐       │   │
│  │ │ 저학년 눈높이에 맞춘 생활안전교육 │       │   │
│  │ │ (화재·지진 대피 훈련), 교통안전   │       │   │
│  │ │ 교육(횡단보도 건너기), 신변안전    │       │   │
│  │ │ 교육(낯선 사람 대처법, 성폭력 예방│       │   │
│  │ │ )을 체험형 활동으로 실시합니다.   │       │   │
│  │ │ 반복 교육을 통해 안전 습관을 형성 │       │   │
│  │ │ 합니다.                           │       │   │
│  │ └─────────────────────────────┘       │   │
│  └───────────────────────────────────┘   │
│                                             │
│  응급상황 대응체계 * (중복 선택)            │
│  [✓] 응급처치 매뉴얼 비치                   │
│  [✓] 학생 안전보험 가입                     │
│  [✓] 비상연락망 구축                        │
│  [✓] 인근 병원 연계                         │
│                                             │
│  ━━━ 급식/간식 관리 ━━━                   │
│                                             │
│  간식 제공 여부 *                           │
│  (●) 제공    ( ) 미제공                     │
│                                             │
│  ┌─ 간식 제공 세부사항 ──────────────┐   │
│  │                                           │   │
│  │ 제공 시간: [15:30]                        │   │
│  │                                           │   │
│  │ 제공 방식:                                │   │
│  │ (●) 학교 직접 제공                        │   │
│  │ ( ) 외부 업체 위탁                        │   │
│  │                                           │   │
│  │ 알레르기 관리 방안  [🤖 AI 생성]         │   │
│  │ ┌─────────────────────────────┐       │   │
│  │ │ 입실 시 알레르기 여부를 사전 조사 │       │   │
│  │ │ 하여 개별 관리 대장에 기록합니다.  │       │   │
│  │ │ 알레르기 유발 식품은 대체 간식을   │       │   │
│  │ │ 제공하고, 응급 상황에 대비하여     │       │   │
│  │ │ 비상 약품을 비치합니다.            │       │   │
│  │ └─────────────────────────────┘       │   │
│  └───────────────────────────────────┘   │
│                                             │
│         [ ← 이전 ]      [ 다음 → ]          │
└─────────────────────────────────────────────┘
```

#### 조건부 표시
- 안전교육 "실시" 선택 시 → 세부사항 영역 표시
- 간식 "제공" 선택 시 → 제공 방식 및 관리 영역 표시
- AI 버튼 3개 (시기, 내용, 알레르기)

---

### Step 7: 예산 및 인력 운영

#### 화면 구성
```
┌─────────────────────────────────────────────┐
│  [7단계] 예산 및 인력 운영                   │
│                                             │
│  ━━━ 인력 운영 ━━━                        │
│                                             │
│  인력 현황 *                                │
│  돌봄전담사: [3]명                          │
│  외부강사: [2]명                            │
│  자원봉사자: [1]명                          │
│  담당교사: [1]명                            │
│                                             │
│  💡 자동 계산:                              │
│  총 정원 35명 ÷ 15명 = 3명 필요             │
│  (현재 돌봄전담사 3명으로 적정)             │
│                                             │
│  인력 배치 기준        [🤖 AI 생성]         │
│  ┌───────────────────────────────────┐   │
│  │ 교육부 기준에 따라 학생 15명당 돌봄전담사│   │
│  │ 1명을 배치하여 안전하고 세심한 돌봄이     │   │
│  │ 이루어지도록 합니다. 각 교실별로 1명의    │   │
│  │ 전담 돌봄전담사를 배치하고, 업무 분장을   │   │
│  │ 통해 역할을 명확히 합니다.                │   │
│  └───────────────────────────────────┘   │
│                                             │
│  ━━━ 예산 계획 ━━━                        │
│                                             │
│  예산 출처 * (중복 선택)                    │
│  [✓] 교육청 지원금                          │
│  [✓] 학교 자체 예산                         │
│  [ ] 지자체 지원금                          │
│                                             │
│  총 예산: [50,000,000]원 (선택)             │
│                                             │
│         [ ← 이전 ]      [ 다음 → ]          │
└─────────────────────────────────────────────┘
```

#### 기능
- **자동 계산**: 총 정원 ÷ 15 = 필요 인력
- **실시간 체크**: 입력된 인력 수가 적정한지 확인
- **AI 생성**: 입력된 인력 정보 기반으로 배치 기준 작성

---

## 🎨 AI 버튼 디자인 상세

### 기본 상태
```css
┌─────────────────┐
│ 🤖 AI 생성      │  ← 보라색 그라데이션
└─────────────────┘
```

### 호버 상태
```css
┌─────────────────┐
│ 🤖 AI 생성      │  ← 살짝 위로 + 그림자 강화
└─────────────────┘
```

### 로딩 상태
```css
┌─────────────────┐
│ ⏳ 생성 중...   │  ← 회색 + 스피너 회전
└─────────────────┘
```

### 완료 상태 (textarea)
```css
┌───────────────────────────────────┐
│                                   │  ← 초록 배경 (1초)
│  생성된 텍스트 내용...            │
│                                   │
└───────────────────────────────────┘
```

---

## 📊 화면별 AI 버튼 배치 요약

| Step | 화면 | AI 버튼 개수 | 위치 |
|------|------|-------------|------|
| 2 | 운영 목표/방침 | 1개 | 추가 목표 우측 상단 |
| 4 | 프로그램 계획 | N개 (동적) | 각 프로그램 카드 내 |
| 5 | 학생 모집/관리 | 2개 | 결석절차, 긴급연락망 |
| 6 | 안전/급식 관리 | 3개 | 교육시기, 교육내용, 알레르기 |
| 7 | 예산/인력 | 1개 | 인력 배치 기준 |

**총 8개 항목** (프로그램 제외 시 기본 7개)

---

## 💡 사용자 경험 (UX) 시나리오

### 시나리오 1: 운영 목표 작성
```
사용자: "추가 목표를 어떻게 써야 할까?"
    ↓
[AI 생성] 버튼 발견
    ↓
클릭
    ↓
2초 대기 (스피너 표시)
    ↓
"부산사랑초등학교는 맞벌이 가정의..."
자동 입력됨
    ↓
사용자: "오! 좋네, 조금만 수정하자"
    ↓
텍스트 수정 (원하는 대로)
```

### 시나리오 2: 프로그램 내용 작성
```
사용자: 프로그램 3개 추가
    ↓
각 프로그램 기본 정보 입력
(이름, 요일, 시간, 대상)
    ↓
각 프로그램의 [AI 생성] 버튼 클릭
    ↓
3개 프로그램 설명 자동 생성
    ↓
필요한 부분만 수정
    ↓
시간 절약! ✨
```

### 시나리오 3: 안전교육 계획
```
사용자: "안전교육을 언제, 어떻게 해야 하지?"
    ↓
Step 6 진입
    ↓
안전교육 "실시" 선택
    ↓
세부사항 영역 표시
    ↓
[AI 생성] (시기) 클릭
"학기 초 오리엔테이션..." 생성
    ↓
[AI 생성] (내용) 클릭
"저학년 눈높이에 맞춘..." 생성
    ↓
완벽한 안전교육 계획 완성!
```

---

## 🔄 인터랙션 플로우

### AI 생성 전체 프로세스
```
[1] 사용자 버튼 클릭
    ↓
[2] JavaScript: generateAIContent() 호출
    ↓
[3] 버튼 비활성화
    button.disabled = true
    button.innerHTML = "<spinner> 생성 중..."
    ↓
[4] 컨텍스트 수집
    collectContextForCare(fieldName, index)
    - 학교명, 학년도
    - 관련 필드 값들
    ↓
[5] API 요청
    POST /api/generate-ai-content
    {
      fieldName: 'additionalGoals',
      context: {...},
      documentType: 'care'
    }
    ↓
[6] Flask Backend
    build_prompt() → OpenAI API
    ↓
[7] 응답 받기
    {
      success: true,
      text: "생성된 텍스트..."
    }
    ↓
[8] textarea에 입력
    textarea.value = data.text
    ↓
[9] 시각 피드백
    textarea.style.backgroundColor = '#e8f5e9'
    1초 후 원래대로
    ↓
[10] 버튼 재활성화
    button.disabled = false
    button.innerHTML = 원래 HTML
    ↓
[11] 성공 알림
    "AI 생성 완료!" (우측 상단)
```

---

## 📱 반응형 디자인

### 데스크톱 (1200px 이상)
```
┌─────────────────────────────────┐
│ 라벨            [🤖 AI 생성]     │  ← 우측 상단
│ ┌─────────────────────────────┐│
│ │                               ││
│ │  텍스트 영역                  ││
│ │                               ││
│ └─────────────────────────────┘│
└─────────────────────────────────┘
```

### 태블릿 (768px ~ 1199px)
```
┌─────────────────────────────────┐
│ 라벨            [🤖 AI 생성]     │  ← 유지
│ ┌─────────────────────────────┐│
│ │  텍스트 영역                  ││
│ └─────────────────────────────┘│
└─────────────────────────────────┘
```

### 모바일 (768px 미만)
```
┌─────────────────────────────────┐
│ 라벨                             │
│ ┌─────────────────────────────┐│
│ │     🤖 AI 생성               ││  ← 전체 너비
│ └─────────────────────────────┘│
│ ┌─────────────────────────────┐│
│ │                               ││
│ │  텍스트 영역                  ││
│ │                               ││
│ └─────────────────────────────┘│
└─────────────────────────────────┘
```

---

## 🎯 접근성 (Accessibility)

### 키보드 네비게이션
```
Tab → AI 생성 버튼 포커스
Enter / Space → 생성 실행
Tab → 다음 필드
```

### 스크린 리더
```html
<button 
    type="button" 
    class="ai-generate-btn"
    aria-label="AI로 프로그램 내용 생성하기"
    onclick="generateAIContent('programContent', 0)">
    <svg aria-hidden="true">...</svg>
    AI 생성
</button>
```

### 포커스 표시
```css
.ai-generate-btn:focus {
    outline: 3px solid #4A90E2;
    outline-offset: 2px;
}
```

---

## 🎨 색상 시스템

### AI 버튼
- **기본**: `linear-gradient(135deg, #667eea 0%, #764ba2 100%)`
- **호버**: 더 진한 보라 + 그림자
- **비활성**: `#ccc ~ #999`
- **로딩**: `#999 ~ #666`

### 텍스트 영역
- **기본**: `#ffffff`
- **포커스**: 파란 테두리 `#4A90E2`
- **에러**: 빨간 테두리 `#f44336`
- **성공**: 초록 배경 `#e8f5e9` (1초)

### 알림
- **성공**: `#4caf50` (초록)
- **에러**: `#f44336` (빨강)
- **정보**: `#2196f3` (파랑)

---

## ⚡ 성능 최적화

### 로딩 상태 관리
```javascript
// 중복 클릭 방지
if (button.disabled) return;

// 즉시 비활성화
button.disabled = true;

// API 완료 후 재활성화
button.disabled = false;
```

### 에러 복구
```javascript
try {
    // API 호출
} catch (error) {
    showNotification(error.message, 'error');
} finally {
    // 항상 버튼 복원
    button.disabled = false;
    button.innerHTML = originalHTML;
}
```

---

## 📋 개발 체크리스트

### HTML
- [ ] Step 2: additionalGoals에 AI 버튼
- [ ] Step 4: 프로그램 카드 템플릿에 AI 버튼
- [ ] Step 5: absenceProcedure에 AI 버튼
- [ ] Step 5: emergencyContactSystem에 AI 버튼
- [ ] Step 6: safetyEducationTiming에 AI 버튼
- [ ] Step 6: safetyEducationContent에 AI 버튼
- [ ] Step 6: allergyManagementPlan에 AI 버튼
- [ ] Step 7: staffAllocationCriteria에 AI 버튼

### CSS
- [ ] .ai-generate-btn 스타일
- [ ] .ai-generate-btn:hover
- [ ] .ai-generate-btn:disabled
- [ ] .ai-generate-btn.generating
- [ ] .spinner 애니메이션
- [ ] .char-count 스타일
- [ ] 반응형 미디어 쿼리

### JavaScript
- [ ] generateAIContent() 함수
- [ ] collectContextForCare() 함수
- [ ] getSelectedCareTypes()
- [ ] getSelectedDays()
- [ ] calculateTotalCapacity()
- [ ] countClassrooms()
- [ ] updateCharCount()
- [ ] showNotification()

### 테스트
- [ ] 각 항목별 생성 테스트
- [ ] 동적 프로그램 카드 생성 테스트
- [ ] 에러 핸들링 테스트
- [ ] 로딩 상태 UI 테스트
- [ ] 모바일 반응형 테스트

---

## 💬 사용자 피드백 수집

### 버전 1.0 이후 개선사항
1. **생성 품질 피드백**
   - 👍 / 👎 버튼 추가
   - 만족도 점수 수집

2. **재생성 옵션**
   - "다시 생성하기" 버튼
   - 다른 톤으로 생성 (공식적/친근한)

3. **부분 수정**
   - 특정 문장만 재생성
   - 길이 조절 (짧게/길게)

---

**문서 버전**: 1.0  
**작성일**: 2025-01-17  
**작성자**: Claude (Anthropic)  
**총 AI 생성 버튼**: 8개 (프로그램 제외 7개 + 프로그램 N개)
