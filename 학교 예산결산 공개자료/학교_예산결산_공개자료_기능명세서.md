# 학교 예산/결산 공개 자료 기능명세서

## 1. 개요

### 1.1 기능 목적
- 학교 예산 및 결산 공개 자료를 AI 기반으로 자동 생성
- 학부모 및 지역주민 대상 이해하기 쉬운 설명 자료 제공
- 재원별, 사업별 투명한 예산 집행 내역 공개
- 법적 공개 의무 이행 지원

### 1.2 대상 사용자
- 초등학교, 중학교, 고등학교 행정실장
- 예산 담당 교사
- 학교운영위원회 간사

### 1.3 문서 특징
- 예산/결산 구분 지원
- 재원별, 사업별 자동 계산 및 비율 산출
- 인포그래픽 및 차트 자동 생성
- 학부모 친화적 설명 자료 형태
- 투명성 및 이해도 중심 설계

### 1.4 주요 문서 유형
1. **예산 공개 자료**: 연간 예산 편성 계획 및 집행 방향
2. **결산 공개 자료**: 전년도 예산 집행 결과 및 성과

---

## 2. 기능 상세

### 2.1 입력 단계 구성

#### **STEP 1: 기본 정보**
| 항목 | 입력 타입 | 필수 여부 | 설명 |
|------|----------|----------|------|
| 학교명 | 텍스트 | 필수 | 학교 전체 이름 |
| 문서 유형 | 라디오 | 필수 | 예산 공개 / 결산 공개 |
| 회계연도 | 선택 (드롭다운) | 필수 | 2025, 2024, 2023 등 |
| 대상 시작일 | 날짜 | 필수 | 회계연도 시작일 |
| 대상 종료일 | 날짜 | 필수 | 회계연도 종료일 |
| 공개 목적 | 선택 (드롭다운) | 필수 | 학부모 대상, 운영위원회, 교육청 등 |
| 작성자 | 텍스트 | 필수 | 담당자 성명 |
| 직책 | 텍스트 | 필수 | 담당자 직책 |
| 작성 날짜 | 날짜 | 필수 | 문서 작성 날짜 |

#### **STEP 2: 예산/결산 개요**
| 항목 | 입력 타입 | 필수 여부 | 설명 |
|------|----------|----------|------|
| 총 예산(결산)액 | 숫자 | 필수 | 총 금액 (원) |
| 전년 대비 증감 금액 | 숫자 | 필수 | 증감액 |
| 전년 대비 증감 비율 | 숫자 | 필수 | 증감률(%) |
| 증감 상태 | 라디오 | 필수 | 증가/감소/동일 |
| 전체 학생 수 | 숫자 | 필수 | 재학생 수 |
| 학생 1인당 금액 | 숫자 | - | 자동 계산 |
| 예산(결산) 편성 방향 | 텍스트영역 | 필수 | 예산 편성의 기본 방향 |
| 주요 특징 | 텍스트영역 | 필수 | 주요 특징 및 강조점 |

**자동 계산:**
- 학생 1인당 금액 = 총 예산(결산)액 ÷ 전체 학생 수

#### **STEP 3: 재원별 내역**
| 항목 | 입력 타입 | 필수 여부 | 설명 |
|------|----------|----------|------|
| 재원별 내역 | 동적 테이블 | 필수 | 재원별 금액 및 비율 |
| 재원별 설명 | 텍스트영역 | 필수 | 재원별 상세 설명 |

**재원별 내역 테이블:**
| 재원 구분 | 금액 | 비율 | 비고 |
|----------|------|------|------|
| 국고보조금 | 500,000,000 | 33% | |
| 시도교육비 | 800,000,000 | 54% | |
| 학교운영지원비 | 150,000,000 | 10% | |
| 목적사업비 | 50,000,000 | 3% | |
| ... | ... | ... | ... |

**자동 계산:**
- 각 재원 비율 = (재원 금액 ÷ 총 예산액) × 100
- 재원별 금액 총계 = STEP 2의 총 예산(결산)액과 일치해야 함
- 재원별 비율 총계 = 100%

#### **STEP 4: 사업별 예산(결산)**
| 항목 | 입력 타입 | 필수 여부 | 설명 |
|------|----------|----------|------|
| 사업 분류 기준 | 라디오 | 필수 | 교육활동별/부서별/목적별 |
| 사업별 내역 | 동적 테이블 | 필수 | 사업별 금액 및 비율 |

**사업별 내역 테이블:**
| 사업명 | 금액 | 비율 | 담당 | 비고 |
|--------|------|------|------|------|
| 교육과정 운영 | 400,000,000 | 27% | 교무 | |
| 방과후학교 | 250,000,000 | 17% | 교무 | |
| 교육복지 | 200,000,000 | 13% | 행정 | |
| 시설유지보수 | 300,000,000 | 20% | 행정 | |
| 인건비 | 250,000,000 | 17% | 행정 | |
| 기타 | 100,000,000 | 6% | 행정 | |
| ... | ... | ... | ... | ... |

**주요 사업별 상세 입력:** (상위 3-5개 주요 사업)
각 주요 사업마다:
- 사업 목적 (텍스트영역, 필수)
- 세부 내역 (텍스트영역, 필수)
- 기대 효과 (텍스트영역, 필수)

**자동 계산:**
- 각 사업 비율 = (사업 금액 ÷ 총 예산액) × 100
- 사업별 금액 총계 = STEP 2의 총 예산(결산)액과 일치해야 함
- 사업별 비율 총계 = 100%

#### **STEP 5: 성과 및 평가** (결산만 해당)
| 항목 | 입력 타입 | 필수 여부 | 설명 |
|------|----------|----------|------|
| 주요 성과 | 텍스트영역 | 필수 | 주요 성과 및 실적 |
| 예산액 | 숫자 | - | STEP 2에서 자동 가져오기 |
| 집행액 | 숫자 | 필수 | 실제 집행한 금액 |
| 집행률 | 숫자 | - | 자동 계산 |
| 미집행 사유 | 텍스트영역 | 선택 | 미집행 발생 이유 |
| 개선 사항 | 텍스트영역 | 필수 | 향후 개선 계획 |

**자동 계산:**
- 집행률 = (집행액 ÷ 예산액) × 100

#### **STEP 6: 집행 현황** (결산만 해당)
| 항목 | 입력 타입 | 필수 여부 | 설명 |
|------|----------|----------|------|
| 분기별 집행 현황 | 동적 테이블 | 필수 | 1~4분기 집행 현황 |
| 집행 현황 분석 | 텍스트영역 | 필수 | 분기별 집행 분석 |

**분기별 집행 현황 테이블:**
| 분기 | 예산액 | 집행액 | 집행률 | 비고 |
|------|--------|--------|--------|------|
| 1분기 | 375,000,000 | 320,000,000 | 85% | |
| 2분기 | 375,000,000 | 360,000,000 | 96% | |
| 3분기 | 375,000,000 | 370,000,000 | 99% | |
| 4분기 | 375,000,000 | 400,000,000 | 107% | 이월 |

**자동 계산:**
- 각 분기 집행률 = (분기 집행액 ÷ 분기 예산액) × 100
- 분기별 예산액 총계 = 연간 예산액
- 분기별 집행액 총계 = STEP 5의 집행액

#### **STEP 7: 향후 계획** (예산만 해당)
| 항목 | 입력 타입 | 필수 여부 | 설명 |
|------|----------|----------|------|
| 집행 계획 | 텍스트영역 | 필수 | 연간 집행 계획 |
| 중점 추진 사항 | 텍스트영역 | 필수 | 중점 추진할 사업 |
| 기대 효과 | 텍스트영역 | 필수 | 예상되는 효과 |

#### **STEP 8: 첨부 자료**
| 항목 | 입력 타입 | 필수 여부 | 설명 |
|------|----------|----------|------|
| 학부모 안내 사항 | 텍스트영역 | 필수 | 학부모 대상 안내 |
| 용어 설명 | 텍스트영역 | 선택 | 예산 용어 설명 |
| 문의처 안내 | 텍스트영역 | 필수 | 문의 연락처 |

---

### 2.2 AI 생성 기능

#### **2.2.1 실시간 AI 답변 생성 버튼**

사용자가 입력 중에도 AI 도움을 받을 수 있도록 각 서술형 텍스트영역마다 "AI 답변 생성" 버튼 제공

**예산 공개 적용 대상 필드:**
- STEP 2: 예산 편성 방향, 주요 특징
- STEP 3: 재원별 설명
- STEP 4: 주요 사업별 (목적, 세부내역, 기대효과) × 사업 개수
- STEP 7: 집행 계획, 중점 추진 사항, 기대 효과
- STEP 8: 학부모 안내 사항, 용어 설명, 문의처 안내

**결산 공개 적용 대상 필드:**
- STEP 2: 결산 편성 방향, 주요 특징
- STEP 3: 재원별 설명
- STEP 4: 주요 사업별 (목적, 세부내역, 기대효과) × 사업 개수
- STEP 5: 주요 성과, 미집행 사유, 개선 사항
- STEP 6: 집행 현황 분석
- STEP 8: 학부모 안내 사항, 용어 설명, 문의처 안내

**작동 방식:**
1. 사용자가 "AI 답변 생성" 버튼 클릭
2. 현재까지 입력된 정보를 컨텍스트로 전달
   - 기본 정보: 학교명, 문서 유형, 회계연도
   - 금액 정보: 총 예산액, 전년 대비 증감
   - 재원/사업 정보: 해당하는 경우
3. 해당 필드에 적합한 내용을 AI가 생성 (5-10초 소요)
4. 생성된 내용을 텍스트영역에 자동 삽입
5. 사용자가 내용을 검토하고 수정 가능

**UI 상태:**
- 기본: "AI 답변 생성" 버튼 (파란색)
- 로딩 중: "생성 중..." 버튼 (회색, 비활성화)
- 완료: 버튼 원상 복구, 텍스트 삽입

#### **2.2.2 최종 문서 생성 시 AI 확장**

전체 입력 완료 후 "생성하기" 버튼 클릭 시 자동 생성되는 서술형 내용

1. **예산(결산) 운영 방향 종합**
   - 입력 정보: 전체 입력 내용
   - 생성 내용: 예산 운영의 전반적인 방향성 종합

2. **재원별 구조 분석**
   - 입력 정보: 재원별 내역
   - 생성 내용: 재원 구조의 특징 및 의미

3. **사업별 투자 방향**
   - 입력 정보: 사업별 내역
   - 생성 내용: 주요 투자 분야 및 우선순위

4. **향후 재정 운영 방향** (공통)
   - 입력 정보: 전체 내용
   - 생성 내용: 향후 재정 운영의 개선 방향

---

### 2.3 출력 형식

#### **생성되는 문서 구조 (예산 공개)**

```
[표지]
2025학년도 ○○초등학교
예산 공개 자료

학부모님과 함께하는 투명한 학교 재정 운영

[목차]
1. 예산 개요
2. 재원별 내역
3. 사업별 예산
4. 향후 계획
5. 참고 자료

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[1. 예산 개요]

가. 기본 현황
   - 회계연도: 2025년 (2025.3.1. ~ 2026.2.28.)
   - 총 예산액: 1,500,000,000원 (15억원)
   - 학생 수: 500명
   - 학생 1인당 예산: 3,000,000원

나. 전년 대비 증감
   - 전년도 예산: 1,400,000,000원 (14억원)
   - 증감액: 100,000,000원 증가
   - 증감률: 7.1% 증가

다. 예산 편성 방향
   (사용자 입력 + AI 보완)

라. 주요 특징
   (사용자 입력 + AI 보완)

마. 예산 운영 방향 종합
   (AI 생성 서술형 내용)

[2. 재원별 내역]

가. 재원별 구성
   ┌────────────────────────────────────┐
   │ 재원 구분      │ 금액        │ 비율 │
   ├────────────────────────────────────┤
   │ 국고보조금     │ 500,000,000 │ 33% │
   │ 시도교육비     │ 800,000,000 │ 54% │
   │ 학교운영지원비 │ 150,000,000 │ 10% │
   │ 목적사업비     │  50,000,000 │  3% │
   ├────────────────────────────────────┤
   │ 합계           │1,500,000,000│ 100%│
   └────────────────────────────────────┘

나. 재원별 설명
   (사용자 입력 + AI 보완)

다. 재원별 구조 분석
   (AI 생성 서술형 내용)

[인포그래픽 1: 재원별 파이차트]

[3. 사업별 예산]

가. 사업별 구성
   ┌──────────────────────────────────────┐
   │ 사업명         │ 금액        │ 비율  │
   ├──────────────────────────────────────┤
   │ 교육과정 운영  │ 400,000,000 │  27% │
   │ 방과후학교     │ 250,000,000 │  17% │
   │ 교육복지       │ 200,000,000 │  13% │
   │ 시설유지보수   │ 300,000,000 │  20% │
   │ 인건비         │ 250,000,000 │  17% │
   │ 기타           │ 100,000,000 │   6% │
   ├──────────────────────────────────────┤
   │ 합계           │1,500,000,000│ 100% │
   └──────────────────────────────────────┘

나. 주요 사업별 상세

<교육과정 운영> 400,000,000원 (27%)

1) 사업 목적
   (사용자 입력 + AI 보완)

2) 세부 내역
   (사용자 입력 + AI 보완)

3) 기대 효과
   (사용자 입력 + AI 보완)

<방과후학교> 250,000,000원 (17%)
... (동일 형식 반복)

다. 사업별 투자 방향
   (AI 생성 서술형 내용)

[인포그래픽 2: 사업별 막대그래프]

[4. 향후 계획]

가. 집행 계획
   (사용자 입력 내용)

나. 중점 추진 사항
   (사용자 입력 내용)

다. 기대 효과
   (사용자 입력 내용)

라. 향후 재정 운영 방향
   (AI 생성 서술형 내용)

[5. 참고 자료]

가. 학부모 안내 사항
   (사용자 입력 내용)

나. 용어 설명
   (사용자 입력 내용)

다. 문의처
   (사용자 입력 내용)

2025년 3월 10일

○○초등학교장  [직인]
담당: 홍길동 행정실장 (02-123-4567)

[붙임]
1. 재원별 내역표
2. 사업별 예산표
3. 예산 구조 인포그래픽
4. 사업별 비율 차트
```

#### **생성되는 문서 구조 (결산 공개)**

```
[표지]
2024학년도 ○○초등학교
결산 공개 자료

학부모님과 함께하는 투명한 학교 재정 운영

[목차]
1. 결산 개요
2. 재원별 내역
3. 사업별 결산
4. 성과 및 평가
5. 집행 현황
6. 참고 자료

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[1. 결산 개요]

가. 기본 현황
   - 회계연도: 2024년 (2024.3.1. ~ 2025.2.28.)
   - 총 예산액: 1,500,000,000원 (15억원)
   - 총 결산액: 1,450,000,000원 (14.5억원)
   - 집행률: 96.7%
   - 학생 수: 500명
   - 학생 1인당 결산액: 2,900,000원

나. 전년 대비 증감
   ...

다. 결산 편성 방향
   ...

라. 주요 특징
   ...

[2. 재원별 내역]
   ... (예산과 동일)

[3. 사업별 결산]
   ... (예산과 동일)

[4. 성과 및 평가]

가. 주요 성과
   (사용자 입력 + AI 보완)

나. 예산 대비 집행 현황
   - 예산액: 1,500,000,000원
   - 집행액: 1,450,000,000원
   - 집행률: 96.7%
   - 이월액: 50,000,000원

다. 미집행 사유
   (사용자 입력 + AI 보완)

라. 개선 사항
   (사용자 입력 + AI 보완)

[5. 집행 현황]

가. 분기별 집행 현황
   ┌────────────────────────────────────┐
   │분기│예산액      │집행액      │집행률│
   ├────────────────────────────────────┤
   │1분기│375,000,000│320,000,000│ 85% │
   │2분기│375,000,000│360,000,000│ 96% │
   │3분기│375,000,000│370,000,000│ 99% │
   │4분기│375,000,000│400,000,000│107% │
   ├────────────────────────────────────┤
   │합계│1,500,000,000│1,450,000,000│96.7%│
   └────────────────────────────────────┘

나. 집행 현황 분석
   (사용자 입력 + AI 보완)

[인포그래픽 3: 분기별 집행 추이 그래프]

[6. 참고 자료]
   ... (예산과 동일)

[붙임]
1. 재원별 내역표
2. 사업별 결산표
3. 결산 구조 인포그래픽
4. 사업별 비율 차트
5. 분기별 집행 추이 그래프
```

---

### 2.4 API 엔드포인트

#### **2.4.1 작성 페이지 조회**
```
GET /create/budget-disclosure
```

**응답:**
```json
{
  "title": "예산/결산 공개 자료 작성",
  "description": "학교 예산 및 결산 정보를 단계별로 입력해 공개 자료를 자동 생성합니다.",
  "documentTypes": ["예산 공개", "결산 공개"],
  "fiscalYears": [2025, 2024, 2023],
  "steps": [
    {
      "step": 1,
      "title": "기본 정보",
      "fields": [...]
    },
    ...
  ]
}
```

#### **2.4.2 필드별 AI 생성 요청**
```
POST /api/generate/budget-disclosure/field
```

**요청 본문:**
```json
{
  "fieldName": "budget_direction",
  "context": {
    "basicInfo": {
      "schoolName": "○○초등학교",
      "documentType": "예산 공개",
      "fiscalYear": 2025,
      "totalAmount": 1500000000
    },
    "overview": {
      "previousYearAmount": 1400000000,
      "changeAmount": 100000000,
      "changeRate": 7.1,
      "changeStatus": "증가"
    }
  }
}
```

**응답:**
```json
{
  "success": true,
  "generatedText": "2025학년도 예산은 학생 중심의 교육과정 운영을 최우선 과제로 삼아 편성하였습니다. 전년 대비 7.1% 증가한 예산을 바탕으로, 교육의 질 제고와 교육복지 확대에 중점을 두고 있습니다.\n\n특히 방과후학교 프로그램 확대, 교육시설 현대화, 그리고 학생 맞춤형 교육 지원에 적극 투자하여 모든 학생이 행복한 학교를 만들어가겠습니다."
}
```

#### **2.4.3 공개 자료 전체 생성 요청**
```
POST /api/generate/budget-disclosure
```

**요청 본문:**
```json
{
  "basicInfo": {
    "schoolName": "○○초등학교",
    "documentType": "예산 공개",
    "fiscalYear": 2025,
    "startDate": "2025-03-01",
    "endDate": "2026-02-28",
    "purpose": "학부모 및 지역주민 대상",
    "author": "홍길동",
    "position": "행정실장",
    "writeDate": "2025-03-10"
  },
  "overview": {
    "totalAmount": 1500000000,
    "previousYearAmount": 1400000000,
    "changeAmount": 100000000,
    "changeRate": 7.1,
    "changeStatus": "증가",
    "totalStudents": 500,
    "amountPerStudent": 3000000,
    "budgetDirection": "학생 중심의 교육과정 운영을 위한 예산 편성...",
    "mainFeatures": "- 방과후학교 프로그램 확대 (전년 대비 20%)\n..."
  },
  "resources": {
    "items": [
      {
        "category": "국고보조금",
        "amount": 500000000,
        "ratio": 33,
        "notes": ""
      },
      {
        "category": "시도교육비",
        "amount": 800000000,
        "ratio": 54,
        "notes": ""
      },
      ...
    ],
    "description": "- 국고보조금: 누리과정 및 방과후학교 지원\n..."
  },
  "projects": {
    "classificationBasis": "교육활동별",
    "items": [
      {
        "name": "교육과정 운영",
        "amount": 400000000,
        "ratio": 27,
        "department": "교무",
        "notes": ""
      },
      ...
    ],
    "majorProjects": [
      {
        "name": "교육과정 운영",
        "amount": 400000000,
        "ratio": 27,
        "purpose": "2025학년도 교육과정의 내실 있는 운영...",
        "details": "- 교과 교육활동비: 150,000,000원\n...",
        "expectedEffects": "학생 중심 교육과정 운영으로 학습 만족도 향상..."
      },
      ...
    ]
  },
  "futurePlans": {
    "executionPlan": "- 1분기: 교육과정 운영 기반 조성 및 준비\n...",
    "focusAreas": "- 학생 맞춤형 교육 지원 강화\n...",
    "expectedEffects": "교육 예산의 효율적 집행을 통한 교육의 질 제고..."
  },
  "attachments": {
    "parentNotice": "학교 예산은 학생들의 교육활동 지원을 위해...",
    "terminology": "- 국고보조금: 국가에서 지원하는 예산\n...",
    "contactInfo": "예산 관련 문의: 행정실 (02-123-4567)..."
  }
}
```

**응답:**
```json
{
  "success": true,
  "documentId": "bd_20250310_001",
  "content": {
    "title": "2025학년도 ○○초등학교 예산 공개 자료",
    "documentType": "예산 공개",
    "sections": [
      {
        "title": "예산 개요",
        "subsections": [
          {
            "title": "기본 현황",
            "content": "...",
            "type": "structured"
          },
          {
            "title": "전년 대비 증감",
            "content": "...",
            "type": "structured"
          },
          {
            "title": "예산 편성 방향",
            "content": "...",
            "generatedBy": "user"
          },
          {
            "title": "주요 특징",
            "content": "...",
            "generatedBy": "user"
          },
          {
            "title": "예산 운영 방향 종합",
            "content": "(AI 생성)",
            "generatedBy": "ai"
          }
        ]
      },
      {
        "title": "재원별 내역",
        "subsections": [
          {
            "title": "재원별 구성",
            "content": "...",
            "type": "table"
          },
          {
            "title": "재원별 설명",
            "content": "...",
            "generatedBy": "user"
          },
          {
            "title": "재원별 구조 분석",
            "content": "(AI 생성)",
            "generatedBy": "ai"
          }
        ]
      },
      {
        "title": "사업별 예산",
        "subsections": [
          {
            "title": "사업별 구성",
            "content": "...",
            "type": "table"
          },
          {
            "title": "주요 사업별 상세",
            "projects": [...]
          },
          {
            "title": "사업별 투자 방향",
            "content": "(AI 생성)",
            "generatedBy": "ai"
          }
        ]
      },
      {
        "title": "향후 계획",
        "content": "...",
        "generatedBy": "mixed"
      },
      {
        "title": "향후 재정 운영 방향",
        "content": "(AI 생성)",
        "generatedBy": "ai"
      },
      {
        "title": "참고 자료",
        "content": "...",
        "generatedBy": "user"
      }
    ],
    "attachments": [
      {
        "title": "재원별 내역표",
        "type": "table",
        "data": [...]
      },
      {
        "title": "사업별 예산표",
        "type": "table",
        "data": [...]
      },
      {
        "title": "예산 구조 인포그래픽",
        "type": "infographic",
        "chartType": "pie",
        "data": [...]
      },
      {
        "title": "사업별 비율 차트",
        "type": "chart",
        "chartType": "bar",
        "data": [...]
      }
    ]
  },
  "createdAt": "2025-03-10T14:30:00Z"
}
```

---

### 2.5 검증 규칙

#### **필수 항목 검증**
- 모든 필수 항목 입력 여부 확인
- 재원 최소 1개 이상 입력
- 사업 최소 3개 이상 입력
- 주요 사업(상위 3-5개) 상세 내용 필수 입력

#### **날짜 검증**
- 대상 종료일이 시작일보다 뒤여야 함

#### **금액 검증**
- 모든 금액은 0보다 커야 함
- 재원별 금액 총계 = 총 예산(결산)액
- 사업별 금액 총계 = 총 예산(결산)액
- 분기별 예산액 총계 = 연간 예산액 (결산)
- 분기별 집행액 총계 = 총 집행액 (결산)

#### **비율 검증**
- 재원별 비율 총계 = 100%
- 사업별 비율 총계 = 100%

#### **집행률 검증 (결산)**
- 집행액 ≤ 예산액 × 110% (10% 초과 경고)
- 집행률 < 80% (미달 경고)

#### **조건부 필수 검증**
- 결산 공개 선택 시: 집행액, 주요 성과, 개선 사항 필수
- 예산 공개 선택 시: 집행 계획, 중점 추진 사항 필수

---

### 2.6 AI 프롬프트 가이드라인

#### **생성 원칙**
1. 학부모 친화적 언어 사용
2. 숫자와 함께 구체적 설명
3. 교육적 의미와 효과 강조
4. 투명성과 신뢰성 확보
5. 긍정적이고 미래지향적 톤

#### **프롬프트 예시 1: 예산 편성 방향**
```
다음 정보를 바탕으로 "예산 편성 방향"을 작성해 주세요.

[입력 정보]
- 학교명: {schoolName}
- 회계연도: {fiscalYear}
- 총 예산액: {totalAmount}원
- 전년 대비: {changeStatus} {changeAmount}원 ({changeRate}%)

[작성 가이드라인]
1. 학부모가 이해하기 쉬운 언어 사용
2. 예산 편성의 기본 철학 및 방향 제시
3. 전년 대비 변화의 의미 설명
4. 학생 중심 교육 강조
5. 5-7문장으로 구성
6. 긍정적이고 미래지향적 어조
```

#### **프롬프트 예시 2: 사업별 세부 내역**
```
다음 정보를 바탕으로 사업의 "세부 내역"을 작성해 주세요.

[입력 정보]
- 사업명: {projectName}
- 사업 금액: {projectAmount}원
- 사업 비율: {projectRatio}%

[작성 가이드라인]
1. 구체적인 세부 항목과 금액 제시
2. 각 항목의 목적과 용도 설명
3. 항목별로 나열 (3-5개 항목)
4. 숫자와 설명을 함께 제시
5. 학부모가 이해하기 쉽게 작성
```

#### **프롬프트 예시 3: 주요 성과 (결산)**
```
다음 정보를 바탕으로 "주요 성과"를 작성해 주세요.

[입력 정보]
- 회계연도: {fiscalYear}
- 총 결산액: {totalAmount}원
- 집행률: {executionRate}%
- 주요 사업: {majorProjects}

[작성 가이드라인]
1. 구체적인 성과 지표 제시
2. 정량적 성과와 정성적 성과 균형
3. 학생들에게 미친 긍정적 영향 강조
4. 4-6개 주요 성과 나열
5. 각 성과마다 구체적 수치 포함
6. 학부모가 체감할 수 있는 내용
```

---

## 3. 기술 구현

### 3.1 프론트엔드 컴포넌트
- `BudgetDisclosurePage.jsx`: 메인 작성 페이지
- `DisclosureBasicInfoStep.jsx`: STEP 1 컴포넌트
- `DisclosureOverviewStep.jsx`: STEP 2 컴포넌트 (자동 계산)
- `DisclosureResourcesStep.jsx`: STEP 3 컴포넌트 (동적 테이블, 자동 계산)
- `DisclosureProjectsStep.jsx`: STEP 4 컴포넌트 (동적 테이블, 주요 사업 상세)
- `DisclosurePerformanceStep.jsx`: STEP 5 컴포넌트 (결산만)
- `DisclosureExecutionStep.jsx`: STEP 6 컴포넌트 (결산만)
- `DisclosureFuturePlansStep.jsx`: STEP 7 컴포넌트 (예산만)
- `DisclosureAttachmentsStep.jsx`: STEP 8 컴포넌트
- `DisclosurePreview.jsx`: 생성된 문서 미리보기

### 3.2 백엔드 처리
- `budgetDisclosureController.js`: API 요청 처리
- `budgetDisclosureService.js`: 비즈니스 로직
- `claudeAIService.js`: AI 생성 요청 (기존 공통 서비스 활용)
- `budgetDisclosureValidator.js`: 입력 데이터 검증
- `budgetCalculator.js`: 자동 계산 (비율, 1인당 금액, 집행률)
- `chartGenerator.js`: 인포그래픽 및 차트 생성
- `documentFormatter.js`: 문서 형식 변환 (기존 공통 서비스 활용)

### 3.3 데이터베이스 스키마
```sql
CREATE TABLE budget_disclosures (
  id VARCHAR(50) PRIMARY KEY,
  user_id VARCHAR(50),
  school_name VARCHAR(100),
  document_type VARCHAR(20),
  fiscal_year INT,
  start_date DATE,
  end_date DATE,
  total_amount BIGINT,
  basic_info JSON,
  overview JSON,
  resources JSON,
  projects JSON,
  performance JSON,
  execution JSON,
  future_plans JSON,
  attachments JSON,
  generated_content JSON,
  status VARCHAR(20),
  created_at TIMESTAMP,
  updated_at TIMESTAMP
);
```

---

## 4. UI/UX 설계

### 4.1 페이지 레이아웃
- 좌측: 단계 진행 표시 (Stepper) - 8단계 (조건부 표시)
- 중앙: 입력 폼
- 우측: 작성 팁 (옵션)
- 하단: 이전/다음/생성 버튼

### 4.2 특수 UI 요소

#### **금액 자동 포매팅**
- 입력: 1500000000
- 표시: 1,500,000,000원 (15억원)

#### **총계 패널**
```
┌─────────────────────────┐
│ 총 금액: 1,500,000,000원│
│ 총 비율: 100%           │
└─────────────────────────┘
```

#### **경고 메시지**
```
⚠️ 재원별 금액 합계가 총 예산액과 일치하지 않습니다.
   (합계: 1,450,000,000원 / 예산: 1,500,000,000원)
```

### 4.3 사용자 경험
- 단계별 진행 상황 표시
- 실시간 자동 계산 및 검증
- 입력 예시 제공 (placeholder)
- 금액 자동 포매팅 (천 단위 구분)
- 조건부 단계 표시 (예산/결산)
- 총계 불일치 즉시 경고

---

## 5. 테스트 시나리오

### 5.1 기능 테스트
1. 모든 입력 항목 정상 작동 확인
2. 자동 계산 기능 확인
3. 금액 합계 검증 확인
4. 비율 합계 검증 확인
5. 조건부 단계 표시 확인
6. AI 생성 요청 및 응답 확인
7. 인포그래픽 생성 확인

### 5.2 통합 테스트
1. 예산 공개 전체 흐름 테스트
2. 결산 공개 전체 흐름 테스트
3. 임시 저장 및 불러오기 테스트
4. 다운로드 기능 테스트 (붙임 4-5개)

### 5.3 사용자 시나리오 테스트
- 시나리오 1: 초등학교 예산 공개 (15억원)
- 시나리오 2: 중학교 결산 공개 (집행률 95%)
- 시나리오 3: 고등학교 예산 공개 (전년 대비 10% 증가)

---

## 6. 향후 개선 계획

### 6.1 기능 추가
- 전년도 예산/결산 비교 차트
- 타 학교 평균 대비 분석
- 월별 집행 현황 추적
- 예산 시뮬레이션 기능
- 엑셀 데이터 가져오기/내보내기

### 6.2 성능 개선
- 대용량 데이터 처리
- 차트 렌더링 최적화

### 6.3 사용성 개선
- 과거 재원/사업 구조 템플릿화
- 드래그 앤 드롭 사업 순서 조정
- 인포그래픽 스타일 커스터마이징

---

## 7. 참고 자료

### 7.1 관련 법규
- 초·중등교육법 시행령 제11조 (학교회계)
- 학교회계 예산 편성 및 집행 지침
- 지방교육재정교부금법

### 7.2 예산 편성 원칙
- 투명성: 명확한 공개 및 설명
- 효율성: 예산의 효과적 배분
- 합목적성: 교육 목적에 부합
- 학생 중심: 학생 교육 우선

### 7.3 공개 의무
- 학교운영위원회 심의
- 학교 홈페이지 게시
- 학부모 대상 설명 자료 배포
- 교육청 제출
