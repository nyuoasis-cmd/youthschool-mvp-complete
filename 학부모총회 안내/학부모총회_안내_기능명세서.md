# 학부모총회 안내 기능명세서

## 1. 개요

### 1.1 기능 목적
- 학교에서 개최하는 학부모총회 안내문을 AI 기반으로 자동 생성
- 정기총회 및 임시총회 모두 지원
- 학년별, 학급별 맞춤형 안내문 작성
- 대면, 온라인, 하이브리드 참석 방식 지원

### 1.2 대상 사용자
- 초등학교, 중학교, 고등학교 담임교사
- 학년부장, 교무부장
- 학부모회 담당 교사

### 1.3 문서 특징
- 정기/임시총회 구분 지원
- 안건별 상세 작성 가능
- 온라인 참석 정보 포함
- 참석 회신 안내 자동 생성
- 격식 있는 공문서 형식

### 1.4 주요 총회 유형
1. **정기총회**: 학기 초, 학기 말 정례적 개최
2. **임시총회**: 긴급 안건, 특별 사안 발생 시

---

## 2. 기능 상세

### 2.1 입력 단계 구성

#### **STEP 1: 기본 정보**
| 항목 | 입력 타입 | 필수 여부 | 설명 |
|------|----------|----------|------|
| 학교명 | 텍스트 | 필수 | 학교 전체 이름 (예: ○○초등학교) |
| 총회 유형 | 라디오 | 필수 | 정기총회 / 임시총회 |
| 학년 | 선택 (드롭다운) | 필수 | 전체 / 1~6학년 |
| 학급 | 숫자 | 선택 | 특정 학급 대상 시 입력 |
| 총회 차수 | 선택 (드롭다운) | 필수 | 2025학년도 제○차 |
| 개최 시기 | 선택 (드롭다운) | 필수 | 학기 초(3월), 1학기 중 등 |
| 작성자 | 텍스트 | 필수 | 담당 교사 성명 |
| 직책 | 텍스트 | 필수 | 교사 직책 (예: 3학년 담임) |
| 작성 날짜 | 날짜 | 필수 | 문서 작성 날짜 |

#### **STEP 2: 안건**
| 항목 | 입력 타입 | 필수 여부 | 설명 |
|------|----------|----------|------|
| 안건 목록 | 동적 테이블 | 필수 | 총회에서 다룰 안건 목록 |
| 안건 상세 내용 | 텍스트영역 | 필수 | 안건별 상세 설명 |

**안건 목록 테이블:**
| 번호 | 안건 제목 | 담당 | 비고 |
|------|----------|------|------|
| 1 | 학급 운영 계획 안내 | 담임 | |
| 2 | 학부모회 임원 선출 | 학부모 | |
| ... | ... | ... | ... |

#### **STEP 3: 일정 및 장소**
| 항목 | 입력 타입 | 필수 여부 | 설명 |
|------|----------|----------|------|
| 개최 날짜 | 날짜 | 필수 | 총회 개최 날짜 |
| 개최 시작 시간 | 시간 | 필수 | 총회 시작 시간 |
| 개최 종료 시간 | 시간 | 필수 | 총회 종료 시간 |
| 개최 장소 | 텍스트 | 필수 | 총회 개최 장소 |
| 장소 세부 안내 | 텍스트영역 | 선택 | 장소 위치, 주차 안내 등 |
| 집합 시간 | 시간 | 필수 | 총회 전 집합 시간 |
| 비고 | 텍스트영역 | 선택 | 추가 안내 사항 |

#### **STEP 4: 참석 안내**
| 항목 | 입력 타입 | 필수 여부 | 설명 |
|------|----------|----------|------|
| 참석 대상 | 다중 선택 | 필수 | 학부모 전원 / 대표 / 희망자 |
| 참석 방법 | 라디오 | 필수 | 대면 / 온라인 / 대면+온라인 |
| 온라인 플랫폼 | 선택 (드롭다운) | 조건부 | Zoom, Google Meet 등 |
| 회의 링크 | URL | 조건부 | 온라인 회의 링크 |
| 회의 ID | 텍스트 | 조건부 | 온라인 회의 ID |
| 회의 비밀번호 | 텍스트 | 조건부 | 온라인 회의 비밀번호 |
| 참석 회신 | 라디오 | 필수 | 필수 / 선택 |
| 회신 방법 | 다중 선택 | 필수 | 가정통신문, e알리미 등 |
| 회신 기한 | 날짜 | 필수 | 참석 회신 마감일 |
| 준비물 안내 | 텍스트영역 | 선택 | 참석 시 준비물 |
| 참석 유의사항 | 텍스트영역 | 선택 | 주차, 복장 등 유의사항 |

#### **STEP 5: 기타 사항**
| 항목 | 입력 타입 | 필수 여부 | 설명 |
|------|----------|----------|------|
| 학부모회비 안내 | 텍스트영역 | 선택 | 회비 납부 안내 |
| 학부모회 임원 선출 안내 | 텍스트영역 | 선택 | 임원 선출 절차 안내 |
| 개인정보 수집 동의 | 텍스트영역 | 선택 | 개인정보 수집 동의 안내 |
| 문의처 안내 | 텍스트영역 | 필수 | 문의 연락처 |
| 기타 안내사항 | 텍스트영역 | 선택 | 추가 안내 사항 |

#### **STEP 6: 인사말**
| 항목 | 입력 타입 | 필수 여부 | 설명 |
|------|----------|----------|------|
| 도입 인사말 | 텍스트영역 | 필수 | 문서 시작 인사말 |
| 총회 취지 설명 | 텍스트영역 | 필수 | 총회 개최 목적 및 취지 |
| 협조 요청 사항 | 텍스트영역 | 필수 | 참석 협조 요청 |
| 마무리 인사말 | 텍스트영역 | 필수 | 문서 마무리 인사말 |

---

### 2.2 AI 생성 기능

#### **2.2.1 실시간 AI 답변 생성 버튼**

사용자가 입력 중에도 AI 도움을 받을 수 있도록 각 서술형 텍스트영역마다 "AI 답변 생성" 버튼 제공

**적용 대상 필드:**
- STEP 2: 안건 상세 내용
- STEP 3: 장소 세부 안내
- STEP 4: 준비물 안내
- STEP 4: 참석 유의사항
- STEP 5: 학부모회비 안내
- STEP 5: 학부모회 임원 선출 안내
- STEP 5: 개인정보 수집 동의
- STEP 5: 문의처 안내
- STEP 5: 기타 안내사항
- STEP 6: 도입 인사말
- STEP 6: 총회 취지 설명
- STEP 6: 협조 요청 사항
- STEP 6: 마무리 인사말

**작동 방식:**
1. 사용자가 "AI 답변 생성" 버튼 클릭
2. 현재까지 입력된 정보(학교명, 총회 유형, 학년, 안건 등)를 컨텍스트로 전달
3. 해당 필드에 적합한 내용을 AI가 생성 (5-10초 소요)
4. 생성된 내용을 텍스트영역에 자동 삽입
5. 사용자가 내용을 검토하고 수정 가능

**UI 상태:**
- 기본: "AI 답변 생성" 버튼 (파란색)
- 로딩 중: "생성 중..." 버튼 (회색, 비활성화)
- 완료: 버튼 원상 복구, 텍스트 삽입

#### **2.2.2 최종 문서 생성 시 AI 확장**

전체 입력 완료 후 "생성하기" 버튼 클릭 시 자동 생성되는 서술형 내용

1. **총회 개요**
   - 입력 정보: 기본 정보, 안건 목록
   - 생성 내용: 총회 전반적인 개요 및 중요성

2. **참석 안내 종합**
   - 입력 정보: 일정, 장소, 참석 방법
   - 생성 내용: 참석 관련 종합 안내

3. **안건 해설**
   - 입력 정보: 안건 목록 및 상세 내용
   - 생성 내용: 각 안건의 의미와 중요성

4. **협조 사항 종합**
   - 입력 정보: 회신, 준비물, 유의사항
   - 생성 내용: 학부모 협조 요청 사항

---

### 2.3 출력 형식

#### **생성되는 문서 구조**

```
[문서 제목]
학부모총회 안내

[수신: 학부모님께]

[발신: ○○초등학교장]

[1. 인사말]
(AI 생성: 도입 인사말)

[2. 총회 안내]
가. 목적: (AI 생성: 총회 취지 설명)
나. 일시: 2025년 3월 15일(금) 14:00 ~ 16:00
다. 장소: 각 학급 교실
라. 대상: 3학년 학부모님 전체

[3. 총회 개요]
(AI 생성 서술형 내용)

[4. 안건]
가. 안건 목록
   1) 학급 운영 계획 안내
   2) 학부모회 임원 선출
   3) 안전 교육 계획 안내

나. 안건 상세 내용
(사용자 입력 + AI 보완)

다. 안건 해설
(AI 생성 서술형 내용)

[5. 참석 안내]
가. 참석 방법: 대면 참석
나. 집합 시간: 13:50까지
다. 장소 안내: (사용자 입력)
라. 준비물: (사용자 입력)
마. 유의사항: (사용자 입력)

[6. 참석 회신]
가. 회신 방법: 가정통신문 회신란, e알리미
나. 회신 기한: 2025년 3월 13일(수)까지
다. 협조 사항: (AI 생성)

[7. 기타 안내]
가. 학부모회비 안내: (사용자 입력)
나. 임원 선출 안내: (사용자 입력)
다. 개인정보 수집 동의: (사용자 입력)
라. 문의처: (사용자 입력)
마. 기타: (사용자 입력)

[8. 마무리 인사]
(AI 생성: 협조 요청 + 마무리 인사말)

2025년 3월 10일

○○초등학교장  [직인]
담당: 3학년 담임 홍길동 (010-1234-5678)

[붙임]
1. 안건 목록표
2. 참석 회신란
```

---

### 2.4 API 엔드포인트

#### **2.4.1 작성 페이지 조회**
```
GET /create/parent-meeting
```

**응답:**
```json
{
  "title": "학부모총회 안내 작성",
  "description": "학부모총회 안내문 정보를 단계별로 입력해 안내문을 자동 생성합니다.",
  "meetingTypes": ["정기총회", "임시총회"],
  "grades": ["전체", "1학년", "2학년", "3학년", "4학년", "5학년", "6학년"],
  "steps": [
    {
      "step": 1,
      "title": "기본 정보",
      "fields": [...]
    },
    ...
  ]
}
```

#### **2.4.2 필드별 AI 생성 요청**
```
POST /api/generate/parent-meeting/field
```

**요청 본문:**
```json
{
  "fieldName": "opening_greeting",
  "context": {
    "basicInfo": {
      "schoolName": "○○초등학교",
      "meetingType": "정기총회",
      "grade": "3학년",
      "class": 1,
      "author": "홍길동",
      "position": "3학년 담임"
    },
    "agenda": [
      {
        "title": "학급 운영 계획 안내",
        "manager": "담임"
      }
    ]
  }
}
```

**응답:**
```json
{
  "success": true,
  "generatedText": "학부모님, 안녕하십니까?\n○○초등학교 3학년 1반 담임 홍길동입니다.\n\n항상 자녀 교육에 관심과 협조를 보내주셔서 진심으로 감사드립니다. 새 학년이 시작된 지 얼마 되지 않았는데, 벌써 한 달이 지났습니다. 학생들은 새로운 환경에 잘 적응하며 즐겁게 학교생활을 하고 있습니다."
}
```

#### **2.4.3 안내문 전체 생성 요청**
```
POST /api/generate/parent-meeting
```

**요청 본문:**
```json
{
  "basicInfo": {
    "schoolName": "○○초등학교",
    "meetingType": "정기총회",
    "grade": "3학년",
    "class": 1,
    "meetingSession": "2025학년도 제1차",
    "period": "학기 초(3월)",
    "author": "홍길동",
    "position": "3학년 담임",
    "writeDate": "2025-03-10"
  },
  "agenda": {
    "items": [
      {
        "number": 1,
        "title": "학급 운영 계획 안내",
        "manager": "담임",
        "notes": ""
      },
      {
        "number": 2,
        "title": "학부모회 임원 선출",
        "manager": "학부모",
        "notes": ""
      }
    ],
    "details": "1. 학급 운영 계획 안내\n- 2025학년도 학급 교육목표 및 중점 사항\n- 학급 규칙 및 생활 지도 방침..."
  },
  "schedule": {
    "date": "2025-03-15",
    "startTime": "14:00",
    "endTime": "16:00",
    "location": "각 학급 교실",
    "locationDetails": "3학년 1반 교실 (본관 2층)\n주차는 운동장을 이용해 주시기 바랍니다.",
    "gatherTime": "13:50",
    "notes": "우천 시에도 정상 진행됩니다."
  },
  "attendance": {
    "target": ["학부모 전원"],
    "method": "대면 참석",
    "onlineInfo": null,
    "replyRequired": "필수",
    "replyMethods": ["가정통신문 회신란", "e알리미"],
    "replyDeadline": "2025-03-13",
    "supplies": "필기도구, 학생생활기록부",
    "precautions": "실내화 착용, 교내 주차 불가"
  },
  "others": {
    "membershipFee": "학부모회 운영을 위한 회비는 1인당 20,000원이며, 납부는 자율입니다.",
    "officerElection": "회장, 부회장, 총무 등 임원을 선출합니다. 입후보를 원하시는 분은 당일 신청해 주시기 바랍니다.",
    "privacyConsent": "총회 참석을 위한 개인정보 수집에 동의합니다. 수집 항목: 성명, 연락처",
    "contact": "문의사항은 담임교사(010-1234-5678) 또는 교무실(02-123-4567)로 연락 주시기 바랍니다.",
    "additional": "총회 후 다과를 준비하였습니다."
  },
  "greetings": {
    "opening": "학부모님, 안녕하십니까?\n○○초등학교 3학년 1반 담임 홍길동입니다...",
    "purpose": "이번 학부모총회는 새 학년 시작을 맞아 학급 운영 계획을 안내하고...",
    "cooperation": "바쁘시더라도 자녀의 학교생활을 위해 많은 참석 부탁드립니다...",
    "closing": "항상 건강하시고 가정에 행복이 가득하시길 기원합니다. 감사합니다."
  }
}
```

**응답:**
```json
{
  "success": true,
  "documentId": "pm_20250310_001",
  "content": {
    "title": "학부모총회 안내",
    "recipient": "학부모님께",
    "sender": "○○초등학교장",
    "sections": [
      {
        "title": "인사말",
        "content": "(사용자 입력 + AI 보완)",
        "generatedBy": "mixed"
      },
      {
        "title": "총회 개요",
        "content": "(AI 생성 내용)",
        "generatedBy": "ai"
      },
      {
        "title": "안건",
        "subsections": [
          {
            "title": "안건 목록",
            "content": "...",
            "type": "table"
          },
          {
            "title": "안건 상세 내용",
            "content": "...",
            "generatedBy": "user"
          },
          {
            "title": "안건 해설",
            "content": "(AI 생성)",
            "generatedBy": "ai"
          }
        ]
      },
      ...
    ],
    "attachments": [
      {
        "title": "안건 목록표",
        "type": "table",
        "data": [...]
      },
      {
        "title": "참석 회신란",
        "type": "form",
        "fields": [...]
      }
    ],
    "footer": {
      "date": "2025년 3월 10일",
      "sender": "○○초등학교장",
      "contact": "담당: 3학년 담임 홍길동 (010-1234-5678)"
    }
  },
  "createdAt": "2025-03-10T14:30:00Z"
}
```

---

### 2.5 검증 규칙

#### **필수 항목 검증**
- 모든 필수 항목 입력 여부 확인
- 안건 최소 1개 이상 입력
- 인사말 4개 필드 모두 입력

#### **날짜 및 시간 검증**
- 개최 날짜가 현재보다 미래여야 함
- 종료 시간이 시작 시간보다 뒤여야 함
- 집합 시간이 시작 시간보다 앞서야 함
- 회신 기한이 총회 날짜보다 앞서야 함

#### **조건부 필수 검증**
- 온라인 참석 선택 시: 플랫폼, 회의 링크 필수
- 특정 학급 선택 시: 학급 번호 필수

#### **형식 검증**
- URL: https:// 형식
- 날짜: YYYY-MM-DD 형식
- 시간: HH:MM 형식
- 전화번호: 010-0000-0000 형식

---

### 2.6 AI 프롬프트 가이드라인

#### **생성 원칙**
1. 학부모에 대한 존중과 예의 표현
2. 격식 있는 공문서 어투 사용
3. 명확하고 이해하기 쉬운 설명
4. 참여 유도 및 협조 요청
5. 긍정적이고 따뜻한 분위기

#### **프롬프트 예시 1: 도입 인사말**
```
다음 정보를 바탕으로 학부모총회 안내문의 "도입 인사말" 부분을 작성해 주세요.

[입력 정보]
- 학교명: {schoolName}
- 학년/반: {grade}학년 {class}반
- 작성자: {author}
- 직책: {position}
- 총회 유형: {meetingType}

[작성 가이드라인]
1. 학부모에 대한 존중과 감사 표현
2. 자기 소개 (학교, 학년, 성명)
3. 학생들의 적응 상황 언급
4. 4-5문장으로 구성
5. 따뜻하고 격식 있는 어조
```

#### **프롬프트 예시 2: 총회 취지 설명**
```
다음 정보를 바탕으로 "총회 취지 설명" 부분을 작성해 주세요.

[입력 정보]
- 총회 유형: {meetingType}
- 개최 시기: {period}
- 안건 목록: {agendaItems}

[작성 가이드라인]
1. 총회 개최 목적 명확히 제시
2. 주요 안건과 연계한 필요성
3. 학부모 참여의 중요성 강조
4. 3-4문장으로 구성
5. 공문서 형식의 격식체
```

#### **프롬프트 예시 3: 협조 요청 사항**
```
다음 정보를 바탕으로 "협조 요청 사항" 부분을 작성해 주세요.

[입력 정보]
- 참석 방법: {attendanceMethod}
- 회신 필수 여부: {replyRequired}
- 회신 기한: {replyDeadline}

[작성 가이드라인]
1. 참석 요청 (바쁘시더라도)
2. 회신 협조 요청 (기한 준수)
3. 자녀 교육과 연계한 중요성
4. 공손하고 정중한 어조
5. 3-4문장으로 구성
```

---

## 3. 기술 구현

### 3.1 프론트엔드 컴포넌트
- `ParentMeetingPage.jsx`: 메인 작성 페이지
- `MeetingBasicInfoStep.jsx`: STEP 1 컴포넌트
- `MeetingAgendaStep.jsx`: STEP 2 컴포넌트 (동적 테이블)
- `MeetingScheduleStep.jsx`: STEP 3 컴포넌트
- `MeetingAttendanceStep.jsx`: STEP 4 컴포넌트
- `MeetingOthersStep.jsx`: STEP 5 컴포넌트
- `MeetingGreetingStep.jsx`: STEP 6 컴포넌트
- `MeetingPreview.jsx`: 생성된 문서 미리보기

### 3.2 백엔드 처리
- `parentMeetingController.js`: API 요청 처리
- `parentMeetingService.js`: 비즈니스 로직
- `claudeAIService.js`: AI 생성 요청 (기존 공통 서비스 활용)
- `parentMeetingValidator.js`: 입력 데이터 검증
- `documentFormatter.js`: 문서 형식 변환 (기존 공통 서비스 활용)

### 3.3 데이터베이스 스키마
```sql
CREATE TABLE parent_meetings (
  id VARCHAR(50) PRIMARY KEY,
  user_id VARCHAR(50),
  school_name VARCHAR(100),
  meeting_type VARCHAR(20),
  grade VARCHAR(20),
  class INT,
  meeting_session VARCHAR(50),
  meeting_date DATE,
  basic_info JSON,
  agenda JSON,
  schedule JSON,
  attendance JSON,
  others JSON,
  greetings JSON,
  generated_content JSON,
  status VARCHAR(20),
  created_at TIMESTAMP,
  updated_at TIMESTAMP
);
```

---

## 4. UI/UX 설계

### 4.1 페이지 레이아웃
- 좌측: 단계 진행 표시 (Stepper) - 6단계
- 중앙: 입력 폼
- 우측: 작성 팁 (옵션)
- 하단: 이전/다음/생성 버튼

### 4.2 특수 UI 요소

#### **총회 유형 배지**
```
정기총회: 🔵 파란색 배지
임시총회: 🟡 노란색 배지
```

#### **참석 방법 아이콘**
```
대면: 🏫 (학교 건물)
온라인: 💻 (컴퓨터)
하이브리드: 🏫💻 (둘 다)
```

### 4.3 사용자 경험
- 단계별 진행 상황 표시
- 각 단계 완료 시 자동 저장 (임시 저장)
- 입력 예시 제공 (placeholder)
- 실시간 입력 검증 및 오류 메시지
- 툴팁으로 입력 가이드 제공
- 온라인 참석 선택 시 관련 필드만 표시

---

## 5. 테스트 시나리오

### 5.1 기능 테스트
1. 모든 입력 항목 정상 작동 확인
2. 필수 항목 미입력 시 검증 확인
3. 날짜 및 시간 검증 확인
4. 조건부 필수 항목 검증 확인
5. 동적 안건 테이블 추가/삭제 기능 확인
6. AI 생성 요청 및 응답 확인
7. 생성된 문서 형식 확인

### 5.2 통합 테스트
1. 전체 작성 흐름 완료 테스트
2. 임시 저장 및 불러오기 테스트
3. 다운로드 기능 테스트 (붙임 2개 포함)
4. 히스토리 저장 확인

### 5.3 사용자 시나리오 테스트
- 시나리오 1: 초등학교 3학년 정기총회 (대면)
- 시나리오 2: 중학교 전체 학부모 임시총회 (온라인)
- 시나리오 3: 고등학교 특정 학급 총회 (하이브리드)

---

## 6. 향후 개선 계획

### 6.1 기능 추가
- 참석 명단 자동 집계
- e알리미/문자 자동 발송 연계
- 이전 총회 내용 템플릿화
- 총회록 작성 기능 연계
- 학부모회비 납부 관리

### 6.2 성능 개선
- AI 생성 시간 단축
- 응답 속도 최적화

### 6.3 사용성 개선
- 총회 유형별 맞춤 템플릿
- 과거 안건 불러오기
- 자주 사용하는 문구 저장
- 드래그 앤 드롭 안건 순서 조정

---

## 7. 참고 자료

### 7.1 관련 지침
- 학교 운영위원회 규정
- 학부모회 운영 규정
- 개인정보 보호법 관련 지침

### 7.2 총회 유형별 특성
- 정기총회: 학기 초 운영 계획, 예산 안내, 임원 선출
- 임시총회: 긴급 안건, 특별 사안 처리, 의견 수렴

### 7.3 작성 시 주의사항
- 학부모에 대한 존중과 예의
- 명확한 안건 제시
- 구체적인 일정 및 장소 안내
- 참석 방법의 다양성 제공
- 회신 방법의 명확한 안내
