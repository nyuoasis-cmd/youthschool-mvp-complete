# 교내 행사 운영계획서 기능명세서

## 1. 개요

### 1.1 기능 목적
- 학교에서 개최하는 각종 교내 행사의 운영계획서를 AI 기반으로 자동 생성
- 체육대회, 축제, 입학식, 졸업식, 학예회, 수련회 등 다양한 행사 지원
- 체계적이고 전문적인 행사 계획 수립 지원

### 1.2 대상 사용자
- 초등학교, 중학교, 고등학교 행사 담당 교사
- 교무부, 학생부, 체육부 등 각 부서 담당자
- 학년부 행사 담당 교사

### 1.3 문서 특징
- 다양한 행사 유형 지원 (체육, 문화, 학술, 의례 등)
- 단계별 준비-진행-평가 체계
- 안전 관리 및 비상 대응 계획 포함
- 참여 대상 및 규모에 따른 맞춤형 계획

### 1.4 주요 행사 유형
1. **체육 행사**: 체육대회, 운동회, 구기대회
2. **문화 행사**: 축제, 학예회, 공연, 전시회
3. **학술 행사**: 과학전람회, 발표대회, 경진대회
4. **의례 행사**: 입학식, 졸업식, 개교기념일
5. **수련 행사**: 수련회, 야영, 극기훈련
6. **기타**: 학부모 참관 수업, 진로체험의 날 등

---

## 2. 기능 상세

### 2.1 입력 단계 구성

#### **STEP 1: 기본 정보**
| 항목 | 입력 타입 | 필수 여부 | 설명 |
|------|----------|----------|------|
| 학교명 | 텍스트 | 필수 | 학교 전체 이름 (예: ○○고등학교) |
| 행사명 | 텍스트 | 필수 | 행사 제목 (예: 2025 체육대회) |
| 행사 유형 | 선택 (드롭다운) | 필수 | 체육/문화/학술/의례/수련/기타 |
| 행사 일시 | 날짜+시간 범위 | 필수 | 시작 ~ 종료 (날짜 및 시간) |
| 행사 장소 | 텍스트 | 필수 | 개최 장소 (예: 학교 운동장) |
| 예비 날짜 | 날짜 | 선택 | 우천 시 예비 날짜 |
| 참가 대상 | 다중 선택 | 필수 | 전교생 / 특정 학년 / 교직원 / 학부모 |
| 예상 참가 인원 | 숫자 | 필수 | 총 참가 예상 인원 |
| 작성자 | 텍스트 | 필수 | 담당 교사 성명 |
| 부서 | 텍스트 | 필수 | 소속 부서 (예: 체육부) |
| 연락처 | 텍스트 | 필수 | 담당자 연락처 |

#### **STEP 2: 행사 목적 및 개요**
| 항목 | 입력 타입 | 필수 여부 | 설명 |
|------|----------|----------|------|
| 행사 목적 | 텍스트영역 | 필수 | 행사 개최 목적 및 의의 |
| 행사 개요 | 텍스트영역 | 필수 | 행사 전반적인 개요 |
| 추진 배경 | 텍스트영역 | 선택 | 행사 추진 배경 및 필요성 |
| 기대 효과 | 텍스트영역 | 필수 | 행사를 통한 기대 효과 |

#### **STEP 3: 세부 운영 계획**
| 항목 | 입력 타입 | 필수 여부 | 설명 |
|------|----------|----------|------|
| 행사 프로그램 | 동적 테이블 | 필수 | 시간대별 프로그램 일정 |
| 운영 방침 | 텍스트영역 | 필수 | 행사 운영의 기본 원칙 |
| 준비 사항 | 텍스트영역 | 필수 | 행사 준비 물품 및 시설 |
| 특별 프로그램 | 텍스트영역 | 선택 | 특색있는 프로그램 내용 |

**행사 프로그램 테이블:**
| 시간 | 프로그램명 | 장소 | 대상 | 담당자 | 비고 |
|------|----------|------|------|--------|------|
| 09:00 ~ 09:30 | 개회식 | 운동장 | 전체 | 교감 | |
| ... | ... | ... | ... | ... | ... |

#### **STEP 4: 조직 및 역할 분담**
| 항목 | 입력 타입 | 필수 여부 | 설명 |
|------|----------|----------|------|
| 추진 조직 | 동적 테이블 | 필수 | 부서별 역할 분담 |
| 위원회 구성 | 텍스트영역 | 선택 | 행사 추진 위원회 |

**추진 조직 테이블:**
| 부서/팀 | 책임자 | 구성원 | 역할 | 비고 |
|---------|--------|--------|------|------|
| 총괄 | 교감 | 전체 교사 | 행사 전반 총괄 | |
| 진행팀 | 홍길동 | 5명 | 프로그램 진행 | |
| ... | ... | ... | ... | ... |

#### **STEP 5: 안전 관리 계획**
| 항목 | 입력 타입 | 필수 여부 | 설명 |
|------|----------|----------|------|
| 안전 관리 대책 | 텍스트영역 | 필수 | 전반적인 안전 관리 방안 |
| 비상 연락망 | 텍스트영역 | 필수 | 비상 상황 시 연락 체계 |
| 응급 처치 체계 | 텍스트영역 | 필수 | 응급환자 발생 시 대응 |
| 기상 악화 대책 | 텍스트영역 | 선택 | 우천 시 대응 계획 |
| 보험 가입 | 선택 (라디오) | 필수 | 가입 완료 / 미가입 |

#### **STEP 6: 예산 계획**
| 항목 | 입력 타입 | 필수 여부 | 설명 |
|------|----------|----------|------|
| 예산 내역 | 동적 테이블 | 필수 | 항목별 예산 편성 |
| 총 예산 | 숫자 (자동계산) | - | 예산 총액 |

**예산 내역 테이블:**
| 항목 | 세부 내용 | 수량 | 단가 | 금액 | 비고 |
|------|----------|------|------|------|------|
| 물품 구입 | 상품권 | 100개 | 5,000 | 500,000 | |
| 식비 | 간식 | 600명 | 3,000 | 1,800,000 | |
| ... | ... | ... | ... | ... | ... |

#### **STEP 7: 사전 준비 일정**
| 항목 | 입력 타입 | 필수 여부 | 설명 |
|------|----------|----------|------|
| 준비 일정 | 동적 테이블 | 필수 | 사전 준비 단계별 일정 |

**준비 일정 테이블:**
| 날짜 | 준비 내용 | 담당 | 완료 여부 | 비고 |
|------|----------|------|----------|------|
| D-30 | 행사 계획서 작성 | 담당교사 | | |
| D-14 | 물품 구입 | 총무팀 | | |
| ... | ... | ... | ... | ... |

#### **STEP 8: 평가 계획**
| 항목 | 입력 타입 | 필수 여부 | 설명 |
|------|----------|----------|------|
| 평가 방법 | 텍스트영역 | 필수 | 행사 평가 방법 |
| 평가 지표 | 텍스트영역 | 필수 | 평가 기준 및 지표 |
| 환류 계획 | 텍스트영역 | 필수 | 평가 결과 활용 방안 |

---

### 2.2 AI 생성 기능

#### **2.2.1 실시간 AI 답변 생성 버튼**

사용자가 입력 중에도 AI 도움을 받을 수 있도록 각 서술형 텍스트영역마다 "AI 답변 생성" 버튼 제공

**적용 대상 필드:**
- STEP 2: 행사 목적
- STEP 2: 행사 개요
- STEP 2: 추진 배경
- STEP 2: 기대 효과
- STEP 3: 운영 방침
- STEP 3: 준비 사항
- STEP 3: 특별 프로그램
- STEP 4: 위원회 구성
- STEP 5: 안전 관리 대책
- STEP 5: 비상 연락망
- STEP 5: 응급 처치 체계
- STEP 5: 기상 악화 대책
- STEP 8: 평가 방법
- STEP 8: 평가 지표
- STEP 8: 환류 계획

**작동 방식:**
1. 사용자가 "AI 답변 생성" 버튼 클릭
2. 현재까지 입력된 정보(행사명, 유형, 일시, 장소 등)를 컨텍스트로 전달
3. 해당 필드에 적합한 내용을 AI가 생성 (5-10초 소요)
4. 생성된 내용을 텍스트영역에 자동 삽입
5. 사용자가 내용을 검토하고 수정 가능

**UI 상태:**
- 기본: "AI 답변 생성" 버튼 (파란색)
- 로딩 중: "생성 중..." 버튼 (회색, 비활성화)
- 완료: 버튼 원상 복구, 텍스트 삽입

#### **2.2.2 최종 문서 생성 시 AI 확장**

전체 입력 완료 후 "생성하기" 버튼 클릭 시 자동 생성되는 서술형 내용

1. **추진 계획 종합**
   - 입력 정보: 행사 목적, 개요, 추진 배경
   - 생성 내용: 행사 추진의 전반적인 계획 및 방향

2. **세부 프로그램 해설**
   - 입력 정보: 프로그램 테이블
   - 생성 내용: 각 프로그램의 의미와 운영 방법

3. **조직 운영 체계**
   - 입력 정보: 추진 조직, 위원회 구성
   - 생성 내용: 효율적인 조직 운영 방안

4. **안전 관리 종합 대책**
   - 입력 정보: 안전 관리 계획 전체
   - 생성 내용: 체계적인 안전 관리 방안

5. **성공적인 행사 운영 방안**
   - 입력 정보: 전체 계획서 내용
   - 생성 내용: 행사 성공을 위한 핵심 전략

6. **평가 및 환류 체계**
   - 입력 정보: 평가 계획
   - 생성 내용: 체계적인 평가 및 개선 방안

---

### 2.3 출력 형식

#### **생성되는 문서 구조**

```
[문서 제목]
○○고등학교 2025 체육대회 운영계획서

[1. 기본 현황]
가. 행사명: 2025 체육대회
나. 일시: 2025년 5월 15일(목) 09:00 ~ 16:00
다. 장소: 학교 운동장
라. 대상: 전교생 800명
마. 담당: 홍길동 (체육부)

[2. 행사 목적]
(사용자 입력 + AI 보완)

[3. 추진 배경 및 필요성]
(AI 생성 서술형 내용)

[4. 행사 개요]
(사용자 입력 내용)

[5. 기대 효과]
(사용자 입력 + AI 보완)

[6. 추진 계획 종합]
(AI 생성 서술형 내용)

[7. 세부 운영 계획]
가. 운영 방침 (사용자 입력)
나. 행사 프로그램 (테이블)
다. 세부 프로그램 해설 (AI 생성)
라. 준비 사항 (사용자 입력)
마. 특별 프로그램 (사용자 입력)

[8. 추진 조직 및 역할]
가. 조직 운영 체계 (AI 생성)
나. 부서별 역할 분담 (테이블)
다. 위원회 구성 (사용자 입력)

[9. 안전 관리 계획]
가. 안전 관리 종합 대책 (AI 생성)
나. 안전 관리 대책 (사용자 입력)
다. 비상 연락망 (사용자 입력)
라. 응급 처치 체계 (사용자 입력)
마. 기상 악화 대책 (사용자 입력)
바. 보험 가입 현황 (사용자 입력)

[10. 예산 계획]
가. 예산 내역 (테이블)
나. 총 예산: 3,500,000원

[11. 사전 준비 일정]
(테이블)

[12. 평가 및 환류]
가. 평가 방법
나. 평가 지표
다. 환류 계획
라. 평가 및 환류 체계 (AI 생성)

[13. 성공적인 행사 운영 방안]
(AI 생성 서술형 내용)

[붙임]
1. 행사 프로그램 일정표
2. 추진 조직 및 역할 분담표
3. 예산 내역서
4. 사전 준비 일정표
```

---

### 2.4 API 엔드포인트

#### **2.4.1 작성 페이지 조회**
```
GET /create/event-plan
```

**응답:**
```json
{
  "title": "교내 행사 운영계획서 작성",
  "description": "교내 행사 운영 계획 정보를 단계별로 입력해 계획서를 자동 생성합니다.",
  "eventTypes": [
    "체육 행사",
    "문화 행사",
    "학술 행사",
    "의례 행사",
    "수련 행사",
    "기타"
  ],
  "steps": [
    {
      "step": 1,
      "title": "기본 정보",
      "fields": [...]
    },
    ...
  ]
}
```

#### **2.4.2 필드별 AI 생성 요청**
```
POST /api/generate/event-plan/field
```

**요청 본문:**
```json
{
  "fieldName": "purpose",
  "context": {
    "basicInfo": {
      "schoolName": "○○고등학교",
      "eventName": "2025 체육대회",
      "eventType": "체육 행사",
      "eventDate": "2025-05-15",
      "participants": 800
    },
    "currentValue": "학생들의 체력 증진과..."
  }
}
```

**응답:**
```json
{
  "success": true,
  "generatedText": "학생들의 체력 증진과 건강한 신체 발달을 도모하고, 경쟁과 협동의 가치를 체험하며, 학급 및 학년 간 화합과 단결력을 강화한다. 또한 공정한 경쟁을 통해 스포츠맨십을 함양하고, 전교생이 함께하는 축제의 장을 마련하여 학교 공동체 의식을 고취한다."
}
```

#### **2.4.3 계획서 전체 생성 요청**
```
POST /api/generate/event-plan
```

**요청 본문:**
```json
{
  "basicInfo": {
    "schoolName": "○○고등학교",
    "eventName": "2025 체육대회",
    "eventType": "체육 행사",
    "eventDateTime": {
      "start": "2025-05-15T09:00:00",
      "end": "2025-05-15T16:00:00"
    },
    "location": "학교 운동장",
    "alternativeDate": "2025-05-22",
    "participants": ["전교생"],
    "expectedCount": 800,
    "author": "홍길동",
    "department": "체육부",
    "contact": "010-1234-5678"
  },
  "overview": {
    "purpose": "학생들의 체력 증진과 건강한 신체 발달...",
    "summary": "전교생이 참여하는 종합 체육대회로...",
    "background": "학생들의 건강 증진과 학교 활력 제고...",
    "expectedEffects": "체력 향상, 협동심 함양, 학교 공동체 의식..."
  },
  "operation": {
    "programs": [
      {
        "time": "09:00 ~ 09:30",
        "name": "개회식",
        "location": "운동장",
        "target": "전체",
        "manager": "교감",
        "notes": ""
      },
      ...
    ],
    "policy": "안전을 최우선으로 하며, 모든 학생이 즐겁게...",
    "preparation": "텐트 10동, 음향 장비, 구급 약품...",
    "specialProgram": "학부모 응원전, 교사 vs 학생 릴레이..."
  },
  "organization": {
    "teams": [
      {
        "team": "총괄",
        "manager": "교감",
        "members": "전체 교사",
        "role": "행사 전반 총괄",
        "notes": ""
      },
      ...
    ],
    "committee": "위원장: 교감\n부위원장: 교무부장..."
  },
  "safety": {
    "measures": "구급 약품 비치, 의료진 대기, 안전 요원 배치...",
    "emergencyContact": "담당교사: 010-1234-5678\n119: 응급의료...",
    "firstAid": "응급환자 발생 시 보건실 이송, 119 신고...",
    "weatherPlan": "우천 시 예비 날짜로 연기...",
    "insurance": "가입 완료"
  },
  "budget": {
    "items": [
      {
        "category": "물품 구입",
        "detail": "상품권",
        "quantity": 100,
        "unitPrice": 5000,
        "amount": 500000,
        "notes": ""
      },
      ...
    ]
  },
  "schedule": [
    {
      "date": "D-30",
      "task": "행사 계획서 작성",
      "manager": "담당교사",
      "completed": false,
      "notes": ""
    },
    ...
  ],
  "evaluation": {
    "methods": "참가자 설문조사, 교사 평가회...",
    "indicators": "참가율 95% 이상, 만족도 90% 이상...",
    "feedback": "평가 결과를 차년도 계획에 반영..."
  }
}
```

**응답:**
```json
{
  "success": true,
  "documentId": "evt_20250118_001",
  "content": {
    "title": "○○고등학교 2025 체육대회 운영계획서",
    "sections": [
      {
        "title": "기본 현황",
        "content": "..."
      },
      {
        "title": "추진 계획 종합",
        "content": "(AI 생성 내용)",
        "generatedBy": "ai"
      },
      ...
    ],
    "attachments": [
      {
        "title": "행사 프로그램 일정표",
        "type": "table",
        "data": [...]
      },
      {
        "title": "추진 조직 및 역할 분담표",
        "type": "table",
        "data": [...]
      },
      {
        "title": "예산 내역서",
        "type": "table",
        "data": [...]
      },
      {
        "title": "사전 준비 일정표",
        "type": "table",
        "data": [...]
      }
    ]
  },
  "createdAt": "2025-01-18T10:30:00Z"
}
```

---

### 2.5 검증 규칙

#### **필수 항목 검증**
- 모든 필수 항목 입력 여부 확인
- 예상 참가 인원 1명 이상
- 행사 시작 시간이 종료 시간보다 앞서야 함
- 동적 테이블 최소 개수 확인
  - 행사 프로그램: 최소 3개 이상
  - 추진 조직: 최소 3개 이상
  - 예산 내역: 최소 1개 이상
  - 준비 일정: 최소 3개 이상

#### **날짜 및 시간 검증**
- 행사 일시가 현재보다 미래여야 함
- 예비 날짜는 원래 날짜보다 뒤여야 함
- 프로그램 시간 중복 확인

#### **형식 검증**
- 연락처: 010-0000-0000 형식
- 날짜: YYYY-MM-DD 형식
- 시간: HH:MM 형식
- 예산 금액: 숫자만 입력

#### **예산 자동 계산**
- 각 항목별 금액 = 수량 × 단가
- 총 예산 = 모든 항목 금액의 합계
- 실시간 자동 계산 및 표시

---

### 2.6 AI 프롬프트 가이드라인

#### **생성 원칙**
1. 교육적 가치와 안전을 최우선으로 고려
2. 공문서 어투 사용 (존댓말, 격식체)
3. 교육청 제출 가능한 전문성
4. 행사 유형별 특성 반영
5. 실천 가능한 구체적 계획 제시

#### **프롬프트 예시 1: 행사 목적**
```
다음 정보를 바탕으로 교내 행사 운영계획서의 "행사 목적" 부분을 작성해 주세요.

[입력 정보]
- 행사명: {eventName}
- 행사 유형: {eventType}
- 참가 대상: {participants}
- 예상 인원: {expectedCount}

[작성 가이드라인]
1. 공문서 형식의 격식체 사용
2. 3-4개 문장으로 구성
3. 교육적 의의 강조
4. 참가자들의 성장과 발달에 초점
5. 구체적이고 실천 가능한 목적
```

#### **프롬프트 예시 2: 세부 프로그램 해설**
```
다음 프로그램 일정을 바탕으로 각 프로그램의 의미와 운영 방법을 설명해 주세요.

[입력 정보]
- 행사명: {eventName}
- 행사 유형: {eventType}
- 프로그램 목록: {programs}

[작성 가이드라인]
1. 각 프로그램의 교육적 의미 설명
2. 프로그램 간 연계성 제시
3. 효과적인 운영 방법 제안
4. 참가자 참여 유도 방안
```

---

## 3. 기술 구현

### 3.1 프론트엔드 컴포넌트
- `EventPlanPage.jsx`: 메인 작성 페이지
- `EventBasicInfoStep.jsx`: STEP 1 컴포넌트
- `EventOverviewStep.jsx`: STEP 2 컴포넌트
- `EventOperationStep.jsx`: STEP 3 컴포넌트 (동적 테이블)
- `EventOrganizationStep.jsx`: STEP 4 컴포넌트 (동적 테이블)
- `EventSafetyStep.jsx`: STEP 5 컴포넌트
- `EventBudgetStep.jsx`: STEP 6 컴포넌트 (동적 테이블, 자동계산)
- `EventScheduleStep.jsx`: STEP 7 컴포넌트 (동적 테이블)
- `EventEvaluationStep.jsx`: STEP 8 컴포넌트
- `EventPreview.jsx`: 생성된 문서 미리보기

### 3.2 백엔드 처리
- `eventPlanController.js`: API 요청 처리
- `eventPlanService.js`: 비즈니스 로직
- `claudeAIService.js`: AI 생성 요청 (기존 공통 서비스 활용)
- `eventPlanValidator.js`: 입력 데이터 검증
- `budgetCalculator.js`: 예산 자동 계산
- `documentFormatter.js`: 문서 형식 변환 (기존 공통 서비스 활용)

### 3.3 데이터베이스 스키마
```sql
CREATE TABLE event_plans (
  id VARCHAR(50) PRIMARY KEY,
  user_id VARCHAR(50),
  school_name VARCHAR(100),
  event_name VARCHAR(200),
  event_type VARCHAR(50),
  event_date_start DATETIME,
  event_date_end DATETIME,
  location VARCHAR(200),
  expected_count INT,
  basic_info JSON,
  overview JSON,
  operation JSON,
  organization JSON,
  safety JSON,
  budget JSON,
  schedule JSON,
  evaluation JSON,
  generated_content JSON,
  status VARCHAR(20),
  created_at TIMESTAMP,
  updated_at TIMESTAMP
);
```

---

## 4. UI/UX 설계

### 4.1 페이지 레이아웃
- 좌측: 단계 진행 표시 (Stepper) - 8단계
- 중앙: 입력 폼
- 우측: 작성 팁 및 행사 유형별 가이드 (옵션)
- 하단: 이전/다음/생성 버튼

### 4.2 특수 UI 요소

#### **행사 유형별 아이콘**
```
체육 행사: 🏃
문화 행사: 🎭
학술 행사: 📚
의례 행사: 🎓
수련 행사: 🏕️
기타: 📅
```

#### **예산 자동 계산 표시**
```
┌─────────────────────────────────────┐
│ 💰 예산 현황                        │
├─────────────────────────────────────┤
│ 물품 구입:        500,000원         │
│ 식비:          1,800,000원         │
│ 인건비:          800,000원         │
│ 기타:            400,000원         │
├─────────────────────────────────────┤
│ 총 예산:       3,500,000원         │
└─────────────────────────────────────┘
```

### 4.3 사용자 경험
- 단계별 진행 상황 표시
- 각 단계 완료 시 자동 저장 (임시 저장)
- 입력 예시 제공 (placeholder)
- 실시간 입력 검증 및 오류 메시지
- 툴팁으로 입력 가이드 제공
- 예산 실시간 자동 계산

---

## 5. 테스트 시나리오

### 5.1 기능 테스트
1. 모든 입력 항목 정상 작동 확인
2. 필수 항목 미입력 시 검증 확인
3. 날짜 및 시간 검증 확인
4. 동적 테이블 추가/삭제 기능 확인 (4개 테이블)
5. 예산 자동 계산 확인
6. AI 생성 요청 및 응답 확인
7. 생성된 문서 형식 확인

### 5.2 통합 테스트
1. 전체 작성 흐름 완료 테스트
2. 임시 저장 및 불러오기 테스트
3. 다운로드 기능 테스트 (붙임 4개 포함)
4. 히스토리 저장 확인

### 5.3 사용자 시나리오 테스트
- 시나리오 1: 초등학교 운동회 계획서
- 시나리오 2: 중학교 축제 계획서
- 시나리오 3: 고등학교 졸업식 계획서

---

## 6. 향후 개선 계획

### 6.1 기능 추가
- 이전 행사 계획서 템플릿화
- 행사별 체크리스트 제공
- 행사 결과 보고서 연계
- 다른 학교 우수 사례 공유

### 6.2 성능 개선
- AI 생성 시간 단축
- 응답 속도 최적화
- 대용량 데이터 처리

### 6.3 사용성 개선
- 행사 유형별 맞춤 템플릿 제공
- 과거 데이터 기반 추천
- 엑셀 일정표 업로드 기능
- 자동 예산 배분 기능

---

## 7. 참고 자료

### 7.1 관련 지침
- 학교 안전 관리 매뉴얼
- 교육부 행사 운영 가이드라인
- 각 교육청 행사 운영 지침

### 7.2 주요 행사별 특성
- 체육대회: 안전 관리, 응급 처치, 기상 대책
- 축제: 프로그램 다양성, 외부 초청, 질서 유지
- 졸업식/입학식: 격식, 순서, 내빈 관리
- 수련회: 숙박 안전, 교육 프로그램, 인솔

### 7.3 관련 사이트
- 학교안전정보센터
- 교육부 학생건강안전과
