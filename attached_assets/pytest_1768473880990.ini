# ================================
# YouthSchool MVP - pytest Configuration
# ================================

[tool:pytest]
# 테스트 파일 패턴
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# 테스트 디렉토리
testpaths = tests

# 추가 옵션
addopts = 
    # 상세한 출력
    -v
    # 실패 시 즉시 중단 (선택)
    # -x
    # 테스트 실행 시간 표시
    --durations=10
    # 경고 표시
    -W ignore::DeprecationWarning
    # Coverage 리포트
    --cov=app
    --cov-report=html
    --cov-report=term-missing
    --cov-report=xml
    # Coverage 최소 기준 (80%)
    --cov-fail-under=80
    # 병렬 실행 (CPU 코어 수만큼)
    -n auto
    # 테스트 순서 랜덤화 (의존성 검증)
    --random-order

# 비동기 테스트 설정
asyncio_mode = auto

# 마커 정의 (테스트 그룹화)
markers =
    unit: Unit tests (빠른 테스트)
    integration: Integration tests (DB, 외부 API 연동)
    e2e: End-to-end tests (전체 플로우)
    slow: Slow tests (10초 이상 소요)
    hwp: HWP 파일 처리 테스트 (Windows 전용)
    ai: Claude AI 관련 테스트 (API 키 필요)
    db: Database tests (PostgreSQL 필요)

# 테스트 커버리지 제외 경로
[coverage:run]
omit =
    */tests/*
    */test_*.py
    */__pycache__/*
    */venv/*
    */migrations/*
    */scripts/*

[coverage:report]
exclude_lines =
    # 표준 제외
    pragma: no cover
    def __repr__
    raise AssertionError
    raise NotImplementedError
    if __name__ == .__main__.:
    if TYPE_CHECKING:
    @abstractmethod
    @abc.abstractmethod
